---
- name: Install common packages
  ansible.builtin.package:
    name:
      - tree
      - shellcheck
      - kakoune
      - kakoune-lsp
      - mise
      - man-db
      - less
      - patch
      - nnn
      - clang
      - cargo
      - marked-man
      - zoxide
      - fzf
      - fd
      - htop

      # needed for makepkg to work
      - fakeroot
      - debugedit

      # system tools
      - etckeeper
    state: present
  become: true
  when: ansible_facts['os_family'] == 'Archlinux'
  tags: packages

- name: Configure zoxide for fish
  ansible.builtin.lineinfile:
    path: ~/.config/fish/config.fish
    line: "zoxide init fish | source"
    create: true
    state: present

